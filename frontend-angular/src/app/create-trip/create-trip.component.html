<app-navigation></app-navigation>

<div class="container-fluid">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <h1 style="margin-top: 30px;margin-bottom: 20px;">Create trip</h1>
                <form [formGroup]="tripForm" (ngSubmit)="onSubmit()">

                    <div class="form-group">
                        <label>Name</label>
                        <input formControlName="name"
                               class="form-control"
                               type="text"
                               placeholder="Enter a name for your trip"
                               style="margin-bottom: 10px;"
                               [ngClass]="{ 'is-invalid': submitted && f.name.errors }">
                        <div *ngIf="submitted && f.name.errors" class="invalid-feedback">
                            <div *ngIf="f.name.errors.required">Field is required</div>
                            <div *ngIf="f.name.errors.minLength">Name must be at least 5</div>
                            <div *ngIf="f.name.errors.maxLength">Maximum length is 30</div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Description</label>
                        <textarea formControlName="description"
                                  class="form-control"
                                  type="text"
                                  placeholder="Write a description for your new adventure!"
                                  style="margin-bottom: 10px;"
                                  [ngClass]="{ 'is-invalid': submitted && f.description.errors }">
                        </textarea>
                        <div *ngIf="submitted && f.description.errors" class="invalid-feedback">
                            <div *ngIf="f.description.errors.required">Field is required</div>
                            <div *ngIf="f.description.errors.minLength">Description must be at least 25 characters long</div>
                            <div *ngIf="f.description.errors.maxLength">Maximum length is 100</div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group col">
                            <label>Starting date</label>
                            <input formControlName="startDate"
                                   class="form-control"
                                   type="date"
                                   [ngClass]="{ 'is-invalid': submitted && f.startDate.errors }"
                            />
                            <div *ngIf="submitted && f.startDate.errors" class="invalid-feedback">
                                <div *ngIf="f.startDate.errors.required">Field is required</div>
                            </div>
                        </div>
                        <div class="form-group col">
                            <label>Finish date</label>
                            <input formControlName="endDate"
                                   class="form-control"
                                   type="date"
                                   placeholder="dd-MM-yyyy"
                                   [ngClass]="{ 'is-invalid': submitted && f.endDate.errors }"
                            />
                            <div *ngIf="submitted && f.endDate.errors" class="invalid-feedback">
                                <div *ngIf="f.endDate.errors.required">Field is required</div>
                            </div>
                        </div>
                    </div>
                    <input
                        #search
                        formControlName="placeInput"
                        class="form-control"
                        id="place"
                        placeholder="Enter location..."
                        type="text"
                        autocomplete="off"
                        autocapitalize="off"
                        [ngClass]="{ 'is-invalid': submitted && f.endDate.errors }"/>
                    <div *ngIf="submitted && f.placeInput.errors" class="invalid-feedback">
                        <div *ngIf="f.placeInput.errors.required">Field is required</div>
                    </div>
                    <agm-map [latitude]="latitude" [longitude]="longitude" [zoom]="zoom" style="height: 500px;width: 1110px;">
                        <agm-marker *ngIf="submittedPlace" [latitude]="latitude" [longitude]="longitude"></agm-marker>
                    </agm-map>
                    <div class="row" style="margin-top: 15px;">
                        <div class="col-sm-2">
                            <h4>{{tripStatus}}</h4>
                        </div>
                        <div class="col">
                            <label class="switch" for="checkbox">
                                <input formControlName="isPrivate"
                                       type="checkbox"
                                       id="checkbox"
                                       (click)="changeTripStatus()"
                                />
                                <div class="slider round"></div>
                            </label>
                        </div>
                    </div>
                    <div class="text-center flex-fill" style="margin-bottom: 20px;">
                        <button type="submit" class="btn-primary btn">Create</button>
                        <button class="btn btn-secondary" type="reset" (click)="onReset()" style="margin-left: 10px;">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
